{"name":"SVN to GIT Migration","id":29,"content":"<h2>Objective</h2>\n\n<p>We want to migrate a SVN project into a GIT project (<em>Why?</em> <a href=\"https://stackoverflow.com/questions/740053/why-should-i-use-git-instead-of-svn\" target=\"_blank\">https://stackoverflow.com/questions/740053/why-should-i-use-git-instead-of-svn</a>). We do not want to lose commit history.</p>\n\n<p>First clone the SVN repository:</p>\n\n<pre>\n<code class=\"language-bash\">git svn clone &lt;svn-url&gt; [&lt;directory&gt;]</code></pre>\n\n<p>While cloning use&nbsp;<code>--stdlayout</code> if your svn-url has /trunk, /branches, /tags under it (i.e. it is in standard SVN format). If your svn layout difers, use <code>--trunk</code> and other options.</p>\n\n<p>You can use <code>--no-metadata</code> option, if you don&#39;t want GIT to modify commit messages.</p>\n\n<p>If clone was successful: go to newly created directory. Run GIT commands like <code>git status</code>, <code>git log</code> to ensure correctness.</p>\n\n<pre>\n<code class=\"language-bash\">git branch -r</code></pre>\n\n<p>Now you should have a local branch named &#39;<em>master</em>&#39;: Run &#39;<code>git branch</code>&#39; to see.<br />\n&nbsp;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;and a remote branch named &#39;git-svn&#39; : Run &#39;<code>git branch -r</code>&#39; to see.</p>\n\n<p>Better is to use GIT-GUI to see these.</p>\n\n<p>Create <em>authors.txt</em> file containing all authors in SVN log. How?</p>\n\n<p>Run command</p>\n\n<pre>\n<code class=\"language-bash\">svn log --xml &lt;svn-url&gt; &gt; authors.txt</code></pre>\n\n<p><br />\nExtract &lt;author&gt; tags from XML document<br />\nCreate unique list of authors<br />\nMap authors to &quot;author = Author Name &lt;author-email&gt;&quot;<br />\nPut these entries in authors.txt</p>\n\n<p>Finally authors.txt should contain lines in this &nbsp;format:</p>\n\n<p>&nbsp; &nbsp; &nbsp;author_id = Name &lt;email&gt;</p>\n\n<pre>\n<code class=\"language-bash\">git config svn.authorsfile &lt;path to authors.txt&gt;\n\ngit svn fetch</code></pre>\n\n<p>Create a local branch for each SVN remote branch other than trunk, that you want to keep.&nbsp;</p>\n\n<pre>\n<code class=\"language-bash\">git checkout -b local_branch remote_branch\n  # It's OK if local_branch and remote_branch are the same name</code></pre>\n\n<p>SVN tags are also cloned as branches, for each tag that you want to keep e.g tag &quot;v1&quot;</p>\n\n<pre>\n<code class=\"language-bash\">git checkout master\ngit tag v1 remotes/tags/v1\ngit branch -d -r remotes/tags/v1</code></pre>\n\n<p>&nbsp;</p>\n\n<pre>\n<code class=\"language-bash\">git svn rebase\ngit remote add origin &lt;git-repo-url&gt;\ngit push -u origin --all</code></pre>\n\n<p>&nbsp;If a username is not found, update <em>authors.txt</em> and run &#39;<code>git svn fetch</code>&#39;</p>\n\n<p>You can cleanup the git repo by cloning it into new directory, and copying the bracnhes that you want to keep, removing origin (as origin will point to older directory)</p>\n\n<pre>\n<code class=\"language-bash\">git clone old_dir new_dir</code></pre>\n\n<p>&nbsp;</p>\n","authorId":null,"subject":"devops","tags":[""],"img":"/images/migration.jpg","summary":"Anybody who has used both SVN and GIT would like to migrate the projects from SVN to GIT. See how to do that.","lastUpdated":"2018-10-19T20:17:49.183+0000"}