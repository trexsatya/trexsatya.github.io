"use strict";!function(e,n){var t={},o=[];t.onReady=function(e){o.push(e)},t.dispatchGlobalReady=function(){for(var e=o.length-1;e>=0;e--)o[e]();o=[],t.dispatchGlobalReady=n},function(){function t(e,t){t=t||{bubbles:!1,cancelable:!1,detail:n};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o}t.prototype=e.Event.prototype,e.CustomEvent=t}(),t.device=function(){var e=navigator.appVersion,n=navigator.userAgent,t="-",o=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var a in o){var i=o[a];if(i.r.test(n)){t=i.s;break}}var r="-";switch(/Windows/.test(t)&&(r=/Windows (.*)/.exec(t)[1],t="Windows"),t){case"Mac OS X":r=/Mac OS X (10[\.\_\d]+)/.exec(n)[1];break;case"Android":r=/Android ([\.\_\d]+)/.exec(n)[1];break;case"iOS":/(iphone|ipod|ipad).* os 8_/.test(n.toLowerCase())?r=n.toLowerCase().split("version/")[1].split(" ")[0]:(r=/OS (\d+)_(\d+)_?(\d+)?/.exec(e),r=r[1]+"."+r[2]+"."+(0|r[3]))}return{os:t,osVersion:r,ANDROID:"Android",IOS:"iOS"}}(),t.browser=function(){var e,n,t,o=navigator.userAgent,a=navigator.appName,i=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10);return(n=o.indexOf("Opera"))!=-1&&(a="Opera",i=o.substring(n+6),(n=o.indexOf("Version"))!=-1&&(i=o.substring(n+8))),(n=o.indexOf("OPR"))!=-1?(a="Opera",i=o.substring(n+4)):(n=o.indexOf("MSIE"))!=-1?(a="Microsoft Internet Explorer",i=o.substring(n+5)):(n=o.indexOf("Chrome"))!=-1?(a="Chrome",i=o.substring(n+7)):(n=o.indexOf("Safari"))!=-1?(a="Safari",i=o.substring(n+7),(n=o.indexOf("Version"))!=-1&&(i=o.substring(n+8))):(n=o.indexOf("Firefox"))!=-1?(a="Firefox",i=o.substring(n+8)):o.indexOf("Trident/")!=-1?(a="Microsoft Internet Explorer",i=o.substring(o.indexOf("rv:")+3)):(e=o.lastIndexOf(" ")+1)<(n=o.lastIndexOf("/"))&&(a=o.substring(e,n),i=o.substring(n+1),a.toLowerCase()==a.toUpperCase()&&(a=navigator.appName)),(t=i.indexOf(";"))!=-1&&(i=i.substring(0,t)),(t=i.indexOf(" "))!=-1&&(i=i.substring(0,t)),(t=i.indexOf(")"))!=-1&&(i=i.substring(0,t)),r=parseInt(""+i,10),isNaN(r)&&(i=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10)),{name:a,version:i}}(),t.ajax=function(){var n=function(e){var n=null;try{n=new XMLHttpRequest,"withCredentials"in n&&e&&(n.withCredentials=!0)}catch(t){console.error(t)}return n},t=function(e){var n=null;try{n=JSON.parse(e)}catch(t){n=null}return n},o=function(e){var n,t="";for(n in e)t+=n+"="+e[n]+"&";var o=t.lastIndexOf("&");return o!==-1&&(e=t.substring(0,o)),t};return function(a){var i=a.method,r=a.url,s="boolean"==typeof a.crossDomain&&a.crossDomain,c=a.contentType,l=a.dataType,f=a.data,u=a.timeout,d=a.success,p=a.error,h=a.headers;if("string"!=typeof i)throw new TypeError("method must be a string");if("string"!=typeof r)throw new TypeError("url must be a string");if("object"==typeof f&&(f="application/json"===c?JSON.stringify(f):o(f)),"function"!=typeof d)throw new TypeError("success must be a function");var v=n(s),g="NO_INTERNET_ACCESS";if(v){if(v.open(i,r,!0),"string"==typeof c&&v.setRequestHeader("Content-type",c),"xml"===l&&v.overrideMimeType&&v.overrideMimeType("application/xml; charset=utf-8"),"object"==typeof h){var m;for(m in h)v.setRequestHeader(m,h[m])}v.onreadystatechange=function(n){if(4===v.readyState){var o=null;"json"===l?(o=t(v.responseText),null===o&&(g="JSON_MALFORMED")):o="xml"===l?v.responseXML:v.responseText;var a=v.status.toString();"2"===a[0]?d(o,v):"function"==typeof p&&e.setTimeout(function(){p(o,g,v)},1),v=null}},"number"==typeof u&&(v.timeout=u,v.ontimeout=function(){g="TIMEOUT_EXCEEDED"}),v.send(f)}else"function"==typeof p&&(g="XMLHTTPREQUEST_UNAVAILABLE",p(g));return{cancel:function(){g="REQUEST_CANCELED",v&&v.abort()}}}}(),t.event=function(o){var a=["mousedown","mousemove","mouseup"],i=!1;("ontouchstart"in e||e.DocumentTouch&&document instanceof DocumentTouch)&&(i=!0,a=["touchstart","touchmove","touchend","touchcancel"]),e.navigator.pointerEnabled?a=["pointerdown","pointermove","pointerup","pointercancel"]:e.navigator.msPointerEnabled&&(a=["MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"]);var r={};r.hasTouch=i,r.start=a[0],r.move=a[1],r.end=a[2],r.cancel="undefined"==typeof a[3]?null:a[3],r.tap="tap";var s=document.createElement("div"),c=[{name:"transition",end:"transitionend"},{name:"MozTransition",end:"transitionend"},{name:"msTransition",end:"msTransitionEnd"},{name:"WebkitTransition",end:"webkitTransitionEnd"}],l=[{name:"animation",end:"animationend"},{name:"MozAnimation",end:"animationend"},{name:"msAnimation",end:"msAnimationEnd"},{name:"WebkitAnimation",end:"webkitAnimationEnd"}],f=null,u=null,d=c.length-1;for(d in c)if(s.style[c[d].name]!==n){f=c[d].end;break}var p=l.length-1;for(p in l)if(s.style[l[p].name]!==n){u=l[p].end;break}var h=t.device.osVersion;h.length>2&&(h=t.device.osVersion.substring(0,3)),"android"===t.device.os.toLowerCase()&&"4.1"===h&&(f="webkitTransitionEnd",u="webkitAnimationEnd"),r.transitionEnd=f,r.animationEnd=u;var v=[],g=function(){function n(e,n){this.el=e,this.callback=n,this.moved=!1,this.startX=0,this.startY=0,this.el.addEventListener(r.start,this,!1)}return n.prototype.start=function(e){this.el.addEventListener(r.move,this,!1),this.el.addEventListener(r.end,this,!1),this.moved=!1,this.startX=e.touches?e.touches[0].clientX:e.clientX,this.startY=e.touches?e.touches[0].clientY:e.clientY},n.prototype.move=function(e){var n=e.touches?e.touches[0].clientX:e.clientX,t=e.touches?e.touches[0].clientY:e.clientY;(Math.abs(n-this.startX)>10||Math.abs(t-this.startY)>10)&&(this.moved=!0)},n.prototype.end=function(n){if(this.el.removeEventListener(r.move,this,!1),this.el.removeEventListener(r.end,this,!1),null!==r.cancel&&this.el.removeEventListener(r.cancel,this,!1),!this.moved){if("undefined"!=typeof o){var t=new e.CustomEvent(this.tap,{detail:{},bubbles:!0,cancelable:!0});this.el.dispatchEvent(t)}this.callback(n)}},n.prototype.cancel=function(){this.moved=!1,this.startX=0,this.startY=0},n.prototype.off=function(){this.el.removeEventListener(r.start,this,!1),this.el.removeEventListener(r.move,this,!1),this.el.removeEventListener(r.end,this,!1),null!==r.cancel&&this.el.removeEventListener(r.cancel,this,!1)},n.prototype.handleEvent=function(e){switch(e.type){case r.start:this.start(e);break;case r.move:this.move(e);break;case r.end:this.end(e);break;case r.cancel:this.cancel(e)}},n}();return t.on=function(e,n,t,o){var a=function(e,n,t,o){if(n===r.tap){var a=new g(e,t);return void v.push(a)}e.addEventListener?e.addEventListener(n,t,o):e.attachEvent&&e.attachEvent("on"+n,t,o)};if("undefined"==typeof e.length)a(e,n,t,o);else for(var i=0,s=e.length;i<s;i++)a(e[i],n,t,o)},e.on=document.on=NodeList.prototype.on=HTMLElement.prototype.on=function(e,n,o){t.on(this,e,n,o)},t.off=function(e,n,t,o){var a=function(e,n,t,o){if(n!==r.tap)e.removeEventListener?e.removeEventListener(n,t,o):e.attachEvent&&e.detachEvent("on"+n,t,o);else for(var a=0,i=e.length;a<i;a++)if(v[a].el===e){v[a].off(),v.splice(a,1);break}};if("undefined"==typeof e.length)a(e,n,t,o);else for(var i=0,s=e.length;i<s;i++)a(e[i],n,t,o)},e.off=document.off=NodeList.prototype.off=HTMLElement.prototype.off=function(e,n,o){t.off(this,e,n,o)},r}(e.jQuery),t.tagManager=function(){if("undefined"!=typeof riot){var e=[],n=function(n,t){n[0].tagName=t,e.push(n[0])},t=function(){return e},o=function(n,t,o){for(var a=[],i=e.length-1;i>=0;i--)if(e[i].tagName===n){a.push(t);var r=a.concat(o);e[i].trigger.apply(this,r);break}};return{addTag:n,getAll:t,trigger:o}}}(),t.options=function(e){var n=!1;"object"==typeof e.i18n&&null!==e.i18n&&(t.i18n(e.i18n),n=!0),e.navigator.useI18n=n,t.navigator(e.navigator)},t.alert=function(e,n,o,a){return t.dialog().alert(e,n,o,a)},t.confirm=function(e,n,o,a,i){return t.dialog().confirm(e,n,o,a,i)},t.prompt=function(e,n,o,a,i){return t.dialog().prompt(e,n,o,a,i)},t.indicator=function(e,n){return t.dialog().indicator(e,n)},t.updateLocale=function(e){var n="undefined"!=typeof riot;t.i18n().setPreference(e).getAll(function(e){if(n){for(var o=t.tagManager.getAll(),a=o.length-1;a>=0;a--)o[a].i18n=e;riot.update()}else t.i18n().bind()})},e.phonon=t,"object"==typeof exports?module.exports=t:"function"==typeof define&&define.amd&&define(function(){return e.phonon=t})}("undefined"!=typeof window?window:this),function(e,n){function t(e){if(f.initCalled)throw new Error("The i18n module has already been instantiated");"string"==typeof e.directory&&(e.directory=e.directory.indexOf("/",e.directory.length-"/".length)!==-1?e.directory:e.directory+"/");var n;for(n in e)f[n]=e[n];f.initCalled=!0}function o(e){if(!f.initCalled)throw new Error("Please, initialize The i18n module using the init method");if("function"!=typeof e)throw new Error("callback must be a function");if(null!==l)return void e(l);var n=new XMLHttpRequest,t=f.localePreferred?f.localePreferred:f.localeFallback;n.open("GET",f.directory+t+".json",!0),n.overrideMimeType&&n.overrideMimeType("application/json; charset=utf-8"),n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status)l=JSON.parse(n.responseText),e(JSON.parse(n.responseText));else{if(!f.localePreferred)throw new Error("The default locale ["+f.directory+f.localeFallback+".json] file is not found");f.localePreferred=null,console.log("The language ["+t+"] is not available, loading "+f.localeFallback),o(function(n){l=n,e(n)})}},n.send("")}function a(e,n){if("string"!=typeof e&&!(e instanceof Array))throw new Error("key must be a string or an array");var t=e instanceof Array;if(null===l)o(function(o){if(t){for(var a=e.length,i=a-1,r={};i>=0;i--)r[e[i]]=o[e[i]];n(r)}else n(o[e])});else if(t){for(var a=e.length,i=a-1,r={};i>=0;i--)r[e[i]]=l[e[i]];n(r)}else n(l[e])}function i(e,t){var a=e||n,i=t;if(1===arguments.length&&"function"==typeof e&&(a=n,i=e),!u(a))throw new TypeError("Not valid element object "+a);var r=a.querySelectorAll("[data-i18n]");null===l?o(function(e){g(r,e),"function"==typeof i&&i()}):(g(r,l),"function"==typeof i&&i())}function r(e){if("string"!=typeof e)throw new Error("The language must be a string");return f.localePreferred=e,l=null,m}function s(){return f.localePreferred}function c(){return e.navigator.userLanguage||e.navigator.language}var l=null,f={localeFallback:null,localePreferred:e.navigator.userLanguage||e.navigator.language,directory:"./",initCalled:!1},u=function(e){return"object"==typeof Node?e instanceof Node:e&&"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName},d=function(e,n){"textContent"in e?e.textContent=n:e.innerText=n},p=function(e,n){e.innerHTML=n},h=function(e,n){e.value=n},v=function(e,n){e.setAttribute("placeholder",n)},g=function(e,n){for(var t=e.length-1;t>=0;t--)for(var o,a=e[t],i=a.getAttribute("data-i18n").trim(),r=/(?:\s|^)(\w+):\s*(.*?)(?=\s+\w+:|$)/g;o=r.exec(i);){var s=o[1].trim(),c=o[2].trim().replace(",","");if(void 0!==n[c])if("text"===s)d(a,n[c]);else if("html"===s)p(a,n[c]);else if("value"===s)h(a,n[c]);else{if("placeholder"!==s)throw new Error("The property: "+s+" is unknown");v(a,n[c])}else console.error("The value: "+c+" does not exist in the JSON file")}},m={};m.init=t,m.getAll=o,m.get=a,m.bind=i,m.setPreference=r,m.getPreference=s,m.getLocale=c,phonon.i18n=function(e){return"object"==typeof e&&t(e),{getAll:function(e){return o(e),this},get:function(e,n){return a(e,n),this},bind:function(e,n){return i(e,n),this},setPreference:function(e){return r(e),this},getPreference:function(){return s()},getLocale:function(){return c()}}}}(window,document),function(e,n,t){function o(n,t){"undefined"==typeof e.phononDOM[n]&&(e.phononDOM[n]={});var o='var page = window.phononDOM["'+n+'"];';o+=t;var a=document.createElement("script");a.text=o,document.head.appendChild(a).parentNode.removeChild(a)}function a(){if(B.animatePages){var e=this;e.classList.remove("page-sliding"),e.classList.remove("left"),e.off(t.event.animationEnd,a,!1),e.classList.remove("app-active")}f(W),u(R),A=!1}function i(){if(B.animatePages){var e=this;e.classList.remove("page-sliding"),e.classList.remove("right"),e.off(t.event.animationEnd,i,!1),e.classList.remove("app-active")}f(W),u(R),A=!1}function r(n,t,o){var a={detail:{page:t},bubbles:!0,cancelable:!0};"undefined"!=typeof o&&(a.detail.req=o);var i=new e.CustomEvent(n,a);document.dispatchEvent(i)}function s(e,n,t){for(var o=0,a=n.length;o<a;o++){var i=n[o];i.event===e&&"function"==typeof i.callback&&i.callback(t)}}function c(n){I&&t.tagManager.trigger(n,"create"),r("pagecreated",n);var o=V(n);if(o.activity instanceof U&&"function"==typeof o.activity.onCreateCallback&&o.activity.onCreateCallback(),s("create",o.callbackRegistered),"object"==typeof e.phononDOM[o.name]){var a=e.phononDOM[o.name].onCreate;"function"==typeof a&&a()}}function l(n){var o=V(n);e.setTimeout(function(){if(I&&t.tagManager.trigger(n,"ready"),r("pageopened",n),o.activity instanceof U&&"function"==typeof o.activity.onReadyCallback&&o.activity.onReadyCallback(),s("ready",o.callbackRegistered),"object"==typeof e.phononDOM[o.name]){var a=e.phononDOM[o.name].onReady;"function"==typeof a&&a()}},o.readyDelay)}function f(n){I&&t.tagManager.trigger(n,"transitionend"),r("pagetransitionend",n);var o=V(n);if(o.activity instanceof U&&"function"==typeof o.activity.onTransitionEndCallback&&o.activity.onTransitionEndCallback(),s("transitionend",o.callbackRegistered),"object"==typeof e.phononDOM[o.name]){var a=e.phononDOM[o.name].onTransitionEnd;"function"==typeof a&&a()}}function u(n){I&&t.tagManager.trigger(n,"hidden"),r("pagehidden",n);var o=V(n);if(o.activity instanceof U&&"function"==typeof o.activity.onHiddenCallback&&o.activity.onHiddenCallback(),s("hidden",o.callbackRegistered),"object"==typeof e.phononDOM[o.name]){var a=e.phononDOM[o.name].onHidden;"function"==typeof a&&a()}}function d(n,o){I&&t.tagManager.trigger(n,"tabchanged",o),r("pagetabchanged",n);var a=V(n);if(a.activity instanceof U&&"function"==typeof a.activity.onTabChangedCallback&&a.activity.onTabChangedCallback(o),s("tabchanged",a.callbackRegistered,o),"object"==typeof e.phononDOM[a.name]){var i=e.phononDOM[a.name].onTabChanged;"function"==typeof i&&i(o)}}function p(n,o,a){function i(){r("pageclosed",n);var t=e.location.hash.split("#")[1];t!==a&&B.useHash?e.location.hash=a:P(a)}if(!w()){var c=V(n);if(!c.async)return void i(!0);var l={close:i};if(I&&t.tagManager.trigger(n,"close",l),c.activity instanceof U&&"function"==typeof c.activity.onCloseCallback&&c.activity.onCloseCallback(l),s("close",c.callbackRegistered,l),"object"==typeof e.phononDOM[c.name]){var f=e.phononDOM[c.name].onClose;"function"==typeof f&&f(l)}}}function h(n,o){if("undefined"!=typeof o){I&&t.tagManager.trigger(n,"hashchanged",o),r("pagehash",n,o);var a=V(n);if(a.activity instanceof U&&"function"==typeof a.activity.onHashChangedCallback&&a.activity.onHashChangedCallback(o),s("hashchanged",a.callbackRegistered,o),"object"==typeof e.phononDOM[a.name]){var i=e.phononDOM[a.name].onHashChanged;"function"==typeof i&&i(o)}}}function v(e,n){"tabchanged"===e&&d(n.page,n.tabNumber)}function g(e,a,i){if(I&&n.compile(function(){B.useI18n?t.i18n().getAll(function(o){t.tagManager.addTag(n.mount(e,{i18n:o}),e),a()}):(t.tagManager.addTag(n.mount(e,{i18n:null}),e),a())}),!I){var r=V(e);if(null!==r.content){if(null===r.nocache||null===r.showloader){var s=function(e){var n=_(e);r.nocache=!1,r.showloader=!1,"true"===n.getAttribute("data-nocache")&&(r.nocache=!0),"true"===n.getAttribute("data-loader")&&(r.showloader=!0)};s(e)}r.showloader&&document.body.classList.add("loading"),m(r.content,function(n){r.showloader&&document.body.classList.remove("loading");var i=_(e),s=document.createElement("div");s.innerHTML=n;var c=s.querySelector(e);if(null===c)throw new Error("Error with "+r.content+" : the template for "+e+" must start with the parent node <"+e+' class="app-page">');for(var l=c.attributes,f=l.length-1;f>=0;f--){var u=l.item(f);"class"!==u.nodeName&&"app-page"!==u.nodeValue&&i.setAttribute(u.nodeName,u.nodeValue)}var d=function(e){var n=e.getElementsByTagName("script");n=Array.prototype.slice.call(n);for(var t=0;t<n.length;t++){var a=n[t].getAttribute("type");"text/javascript"!==a&&null!==a||o(r.name,n[t].innerHTML)}};B.useI18n?t.i18n().bind(c,function(){i.innerHTML=c.innerHTML,d(s),a()}):(i.innerHTML=c.innerHTML,d(s),a())},i)}else a()}}function m(e,n,t){var o=new XMLHttpRequest;o.overrideMimeType&&o.overrideMimeType("text/html; charset=utf-8"),o.onreadystatechange=function(){4===o.readyState&&(200===o.status||!o.status&&o.responseText.length)&&n(o.responseText,B,e)},"string"!=typeof t?(o.open("GET",B.templateRootDirectory+e,!0),o.send("")):(o.open("POST",B.templateRootDirectory+e,!0),o.setRequestHeader("Content-type","application/x-www-form-urlencoded"),o.send(t))}function y(e,n){n="object"==typeof n?n:{};var t,o={name:e,mounted:!1,async:!1,activity:null,content:null,readyDelay:1,callbackRegistered:[],nocache:null,showloader:null};for(t in n)o[t]=n[t];return o}function b(e,n){n="object"==typeof n?n:{};var t=V(e);if(null===t)return N.push(y(e,n));var o;for(o in n)t[o]=n[o];return!0}function w(){return!("undefined"==typeof t.dialog||!t.dialogUtil.closeActive())||(!("undefined"==typeof t.popover||!t.popoverUtil.closeActive())||(!("undefined"==typeof t.panel||!t.panelUtil.closeActive())||!("undefined"==typeof t.sidePanel||!t.sidePanelUtil.closeActive())))}function E(){var e={page:B.defaultPage,params:""};if(S.length>0){for(var n=-1,t=S.length-1;t>=0;t--)if(S[t].page===W){n=t-1;break}n>-1&&(e=S[n],S.slice(n,1))}return e}function T(n){var t,n=n||e.event,o=n.target,a="";if("object"==typeof o&&"FORM"==o.nodeName){var i;for(i=o.elements.length-1;i>=0;i--)if(t=o.elements[i],t.name&&"file"!=t.type&&"reset"!=t.type)if("select-multiple"==t.type)for(j=o.elements[i].options.length-1;j>=0;j--)t.options[j].selected&&(a+="&"+t.name+"="+encodeURIComponent(t.options[j].value).replace(/%20/g,"+"));else("submit"!=t.type&&"button"!=t.type||n.target==t)&&("checkbox"!=t.type&&"radio"!=t.type||t.checked)&&(a+="&"+t.name+"="+encodeURIComponent(t.value).replace(/%20/g,"+"))}return a.substr(1)}function C(e){X=!0;var n=e.target,t=null,o=!1,a="";if("submit"==e.type){var i=n.getAttribute("action");if(i.match(new RegExp("^#"+B.hashPrefix)))return e.preventDefault(),t=i.substr(1+B.hashPrefix.length),p(W,t,B.hashPrefix+t),k(t,function(){},T(e)),L(i.substr(1+B.hashPrefix.length))}for(;n&&n!==document;n=n.parentNode){var r=n.getAttribute("data-navigation");if("undefined"!=typeof n.href&&n.href.indexOf("#!")!==-1){o=!0;break}if(r){t=r;break}}if((!o||!B.useHash)&&(null!==t||o)){var s=B.defaultPage;if(null!==t)if("$previous-page"===t){var c=E();s=c.page,a=c.params}else s=t;else{var l=n.href.match("/#"+B.hashPrefix+"([A-Za-z0-9-.]+)?(.*)/");l&&(s=l[1],a=l[2])}var f=B.hashPrefix+s;""!==a&&(f=f+"/"+a,f=f.replace("//","/")),p(W,s,f)}}function M(e,n){var o=_(e),r=_(n);r.classList.add("app-active"),B.animatePages?(o.classList.add("page-sliding"),H?(o.classList.add("left"),o.on(t.event.animationEnd,a,!1)):(o.classList.add("right"),o.on(t.event.animationEnd,i,!1))):(o.classList.remove("app-active"),H?a():i());for(var s=r.querySelectorAll(".content"),c=s.length-1;c>=0;c--){var l=s[c];null!==l&&0!==l.scrollTop&&(l.scrollTop=0)}n===B.defaultPage&&(S=[])}function k(e,n,o){if(A&&"function"==typeof n)return n();var a=V(e);D&&(A=!0,R=W,W=e),!a.mounted||a.nocache?g(a.name,function(){if(a.mounted=!0,c(e),l(e),D||t.dispatchGlobalReady(),D&&M(R,e),!D){D=!0;var o=_(e);o.classList.contains("app-active")||o.classList.add("app-active")}"function"==typeof n&&n()},o):(l(e),M(R,e),"function"==typeof n&&n())}function x(e){"string"==typeof e.templateRootDirectory&&""!==e.templateRootDirectory&&(e.templateRootDirectory=e.templateRootDirectory.indexOf("/",e.templateRootDirectory.length-"/".length)!==-1?e.templateRootDirectory:e.templateRootDirectory+"/"),"object"==typeof e.hashPrefix&&(e.hashPrefix="");var n;for(n in e)B[n]=e[n];B.enableBrowserBackButton&&(X=!0);for(var t=document.querySelectorAll("[data-page]"),o=t.length-1;o>=0;o--){var a=t[o];a.classList.contains("app-page")||a.classList.add("app-page"),b(a.tagName.toLowerCase())}}function O(){if(D)throw new Error("The app has been already started");var e=t.device.os.toLowerCase(),n="web";"android"===e?n="android":"ios"===e&&(n="ios"),document.body.classList.contains(n)||document.body.classList.add(n),P()}function L(n,t){var o=V(W),a=V(n);if(!a)throw new Error("The following page: "+n+" does not exists");var i="string"==typeof t?B.hashPrefix+a.name+"/"+t:B.hashPrefix+a.name;if(o.async)p(W,a.name,i);else{var r=e.location.hash.split("/");r[0].indexOf(a.name)===-1&&B.useHash&&(e.location.hash=i)}}function P(n,t){var o,a="string"==typeof n?n:e.location.href.split("#")[1]||"",i=a.split("/"),r=i.slice(1,i.length),s=i[0],c=B.hashPrefix.indexOf("/");c!==-1?(s="undefined"==typeof i[1]?"":i[1],r=i.slice(2,i.length),o=s.substring(c+1,s.length)):o=s.substring(B.hashPrefix.length,s.length);var l=V(o);if(D||l)!D&&l&&(W=l.name);else if(W=B.defaultPage,l=V(B.defaultPage),B.useHash)return void(e.location.hash=B.hashPrefix+B.defaultPage);if(l){if(w(),l.name===W&&D)return void h(l.name,r);if(D&&!X)return;for(var f=!1,u=S.length-1;u>=0;u--)if(S[u].page===l.name){f=!0;break}if(S.length>0?l.name===B.defaultPage&&(H=!1):H=!0,S.length>1&&S[S.length-2].page===l.name&&(H=!1),!f){var d=r.join("/");S.push({page:l.name,params:d})}"function"!=typeof l.callback||l.mounted||l.callback(l.activity),l.mounted?(k(l.name,null,t),h(l.name,r)):k(l.name,function(){h(l.name,r)},t),B.enableBrowserBackButton||(X=!1)}}e.phononDOM={};var N=[],S=[],D=!1,A=!1,W=null,R=null,H=!0,X=!1,I=void 0!==n,B={defaultPage:null,defaultTemplateExtension:null,hashPrefix:"!",animatePages:!0,templateRootDirectory:"",useI18n:!0,enableBrowserBackButton:!1,useHash:!0},U=function(){function e(e){if("object"==typeof e){var n;for(n in e)void 0!==this[n]&&"constructor"!==this[n]&&(this[n+"Callback"]=e[n])}}return e.prototype.onCreate=function(e){this.onCreateCallback=e},e.prototype.onReady=function(e){this.onReadyCallback=e},e.prototype.onClose=function(e){this.onCloseCallback=function(n){e(n)}},e.prototype.onHidden=function(e){this.onHiddenCallback=e},e.prototype.onTransitionEnd=function(e){this.onTransitionEndCallback=e},e.prototype.onHashChanged=function(e){this.onHashChangedCallback=function(n){e.apply(this,n)}},e.prototype.onTabChanged=function(e){this.onTabChangedCallback=function(n){e(n)}},e}(),V=function(e){for(var n=N.length-1;n>=0;n--)if(N[n].name===e)return N[n];return null},_=function(e){for(var n=document.querySelectorAll("[data-page]"),t=n.length-1,o=null;t>=0;t--)if(n[t].tagName.toLowerCase()===e){o=n[t];break}return o};document.on("tap",C),document.on("submit",C),B.useHash&&e.addEventListener("hashchange",P),document.on("backbutton",function(){var e=E();p(W,e.page,B.hashPrefix+e.page+"/"+e.params)}),t.navigator=function(n){return"object"==typeof n&&x(n),{currentPage:W,previousPage:R,start:O,changePage:function(n,t){X=!0;var o=w()?400:1;e.setTimeout(function(){L(n,t)},o)},on:function(e,n){if("string"!=typeof e.page)throw new Error("Page name must be a string");if("undefined"!=typeof e.preventClose&&"boolean"!=typeof e.preventClose)throw new Error("preventClose option must be a boolean");if("undefined"!=typeof e.readyDelay&&"number"!=typeof e.readyDelay)throw new Error("readyDelay option must be a number");null!==typeof e.content&&"string"==typeof B.defaultTemplateExtension&&(e.content=e.page+"."+B.defaultTemplateExtension);var t=V(e.page),o=null!==t;o||(t=y(e.page)),"function"==typeof n||"object"==typeof n?t.activity=new U(n):t.activity=null,t.callback=n,t.async="boolean"==typeof e.preventClose&&e.preventClose,t.content="string"==typeof e.content?e.content:null,t.readyDelay="number"==typeof e.readyDelay?e.readyDelay:1,b(e.page.toLowerCase(),t)},onPage:function(e){if("string"!=typeof e)throw new Error("PageName must be a string");return b(e,{}),{addEvent:function(n,t){var o=V(e);o.callbackRegistered.push({event:n,callback:t})}}},callCallback:v}}}("undefined"!=typeof window?window:this,"undefined"!=typeof riot?riot:void 0,phonon);